# data from: https://www.fda.gov/food/foodborneillnesscontaminants/metals/ucm115644.htm
fish_csv = <<-HEREDOC
SCALLOP,0.003,39
CLAM,0.009,15
SHRIMP,0.009,40
OYSTER,0.012,61
SARDINE,0.013,90
TILAPIA,0.013,32
ANCHOVIES,0.016,15
SALMON (FRESH/FROZEN),0.022,94
CATFISH,0.024,59
SQUID,0.024,36
POLLOCK,0.031,95
CRAWFISH,0.033,46
SHAD,0.038,15
MACKEREL ATLANTIC (N.Atlantic),0.05,80
MULLET,0.05,20
WHITING,0.051,13
HADDOCK (Atlantic),0.055,50
FLATFISH,0.056,71
BUTTERFISH,0.058,89
CRAB,0.065,93
CROAKER ATLANTIC (Atlantic),0.069,90
TROUT (FRESHWATER),0.071,35
HERRING,0.078,27
HAKE,0.079,49
JACKSMELT,0.081,23
MACKEREL CHUB (Pacific),0.088,30
WHITEFISH,0.089,37
SHEEPSHEAD,0.09,8
LOBSTER (Spiny),0.093,13
PICKEREL,0.095,16
LOBSTER (NORTHERN / AMERICAN),0.107,9
CARP,0.11,14
COD,0.111,115
PERCH OCEAN,0.121,31
"TUNA (CANNED, LIGHT)",0.126,545
BUFFALOFISH,0.137,17
SKATE,0.137,56
TILEFISH (Atlantic),0.144,32
"TUNA (FRESH/FROZEN, SKIPJACK)",0.144,3
PERCH (Freshwater),0.15,19
MONKFISH,0.161,11
LOBSTER (Species Unknown),0.166,71
SNAPPER,0.166,67
"BASS (SALTWATER, BLACK, STRIPED, ROCKFISH)",0.167,101
MAHI MAHI,0.178,29
MACKEREL SPANISH (S. Atlantic),0.182,43
SCORPIONFISH,0.233,6
WEAKFISH (SEA TROUT),0.235,46
HALIBUT,0.241,101
CROAKER WHITE (Pacific),0.287,15
"TUNA (CANNED, ALBACORE)",0.35,451
BASS CHILEAN,0.354,74
"TUNA (FRESH/FROZEN, YELLOWFIN)",0.354,231
"TUNA (FRESH/FROZEN, ALBACORE)",0.358,43
SABLEFISH,0.361,26
BLUEFISH,0.368,94
"TUNA (FRESH/FROZEN, ALL)",0.386,420
"TUNA (FRESH/FROZEN, Species Unknown)",0.41,122
GROUPER (ALL SPECIES),0.448,53
MACKEREL SPANISH (Gulf of Mexico),0.454,66
MARLIN,0.485,16
ORANGE ROUGHY,0.571,81
"TUNA (FRESH/FROZEN, BIGEYE)",0.689,21
MACKEREL KING,0.73,213
SHARK,0.979,356
SWORDFISH,0.995,636
TILEFISH (Gulf of Mexico),1.123,60
HEREDOC

namespace :seafood do
  namespace :temp do
    desc "Import fish"
    task import_fish: :environment do
      CSV.parse(fish_csv) do |row|
        fish = Fish.new(
          species: row[0].titleize,
          mercury_mean_ppm: row[1],
          mercury_num_samples: row[2]
        )
        fish.nutrients = NutritionData.new("raw #{fish.species}").call
        fish.save!

        puts "Saved #{fish.species}"
      end
    end
  end
end